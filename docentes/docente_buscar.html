<div id="card_buscar_docente" class="card text-white bg-dark mb-3">
    <div class="card-header">
        CONSULTA DE DOCENTES
        
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="alert" data-bs-target="#card_buscar_docente" aria-label="Close"></button>
    </div>
    <div class="card-body">
        <form id="frmConsultaDocentes">
           <table id="tblConsultaDocentes" class="table table-dark table-hover">
               <thead>
                    <tr>
                        <th colspan="4">
                            <input class="form-control" placeholder="Buscar docentes" type="text" 
                                name="txtBuscarDocentes" id="txtBuscarDocentes" />
                        </th>
                    </tr>
                    <tr>
                        <th scope="col">Codigo</th>
                        <th scope="col">Nombre</th>
                        <th scope="col">Telefono</th>
                        <th scope="col">Escalafon</th>
                        <th></th>
                    </tr>
               </thead>
               <tbody></tbody>
           </table>
        </form>
    </div>
</div>
<script>
    function obtenerDatosDocente(){
        $.get("http://localhost:3000/consulta-docente", (resp, status)=>{
            let tbody = $("#tblConsultaDocentes > tbody"),
                    filas = "";
            tbody.find("tr").remove();
           if (resp.data.length>0){    
                resp.data.forEach(docente=>{
                filas += `
                        <tr onClick='mostrarDatosDocentes(${JSON.stringify(docente)})'>
                            <td>${docente.codigo}</td>
                            <td>${docente.nombre}</td>
                            <td>${docente.telefono}</td>
                            <td>${docente.escalafon}</td>
                            <td>
                                <a class="btn btn-outline-danger" onClick='eliminarDocente(${JSON.stringify(docente)})'>Eliminar</a>
                            </td>
                        </tr>
                    `;
                });
            }else{
                filas = `
                    <tr>
                        <td colspan="3">No hay docentes para mostrar</td>
                    </tr>
                `;
            }
            tbody.append(filas);
        }, "json");
    }
    $(document).ready(e=>{
        $("#txtBuscarDocentes").keyup(function(e){
            let valor = $(this).val(),
                $tbldocentes = $("#tblConsultaDocentes > tbody > tr");
            $tbldocentes.show();
            let $no_encontrados = $tbldocentes.filter(function(i, fila){
                return $(this).find("td:not(:last)").text().toLowerCase().indexOf(valor.toLowerCase())==-1;
            });
            $no_encontrados.hide();
        });
        obtenerDatosDocente();
    });
</script>